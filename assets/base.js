(()=>{"use strict";const t=window.component((()=>{document.addEventListener("shopify:section:load",(()=>{window.app.unmount(),window.app.mount()}))})),e=window.component((t=>{const{text:e}=t.dataset;console.log("console:log",e)}));function n(t=document.body,e="js-"){const n=[...t.querySelectorAll(e?`[class*="${e}"]`:"*")],o=e?"classList":"dataset";return n.reduce(((t,n)=>([].slice.call(e?n[o]:Object.entries(n[o])).forEach((o=>{let a;e&&o.slice(0,e.length)===e?a=o.slice(e.length,o.length):e||([a]=o),a&&(t[a]=t.hasOwnProperty(a)?t[a].constructor===Array?t[a].concat(n):[t[a],n]:n)})),t)),{})}const o=window.component(((t,e)=>{const{group:o}=t.dataset,{inner:a,toggle:c}=n(t,null),r="open",d=()=>{t.style.setProperty("--innerHeight",`${a.scrollHeight}px`)};d(),window.addEventListener("resize",d,{passive:!0}),c.addEventListener("click",(()=>{e.emit("accordion:toggle",null,{open:!t.classList.contains(r),node:t,group:o})})),e.on("accordion:toggle",((e,n={})=>{o===n.group&&t.classList[n.open&&n.node===t?"add":"remove"](r)}))})),a=window.component(((t,e)=>{const{cartCount:o,cartToggle:a}=n(t,null),c=t=>{t?.token&&(o.textContent=t.item_count)};e.on("cart:updated",(({cart:t})=>c(t))),a.addEventListener("click",(t=>{t.preventDefault(),e.emit("cart:toggle",(({cartOpen:t})=>({cartOpen:!t??!0})))})),c(e.getState()?.cart)}));const c=({keyCode:t},{type:e,boolean:n})=>{27===t&&e&&n&&window.app.emit(e,{[n]:!1})},r={sectionRendering:t,consoleLog:e,accordion:o,header:a,cartDrawer:window.component(((t,e)=>{const o=t.parentNode,a=t,{toggle:r,clear:d,focusEl:i}=n(t,null),s=({cartOpen:e})=>{t.classList[e?"add":"remove"]("open"),e?(a.tabIndex="0",(i||t).focus()):a.tabIndex="-1"};return r.forEach((t=>{t.addEventListener("click",(()=>e.emit("cart:toggle",(({cartOpen:t})=>({cartOpen:!t??!0})))))})),s(e.getState()),d&&d.addEventListener("click",(()=>(window.app.emit("cart:updating"),fetch(`${window.Phill.routes.cartClear}.js`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({sections:"cart-drawer"})}).then((t=>t.json())).then((t=>(window.app.emit(["cart:updated","cart:render"],{cart:t}),t)))))),t.addEventListener("keyup",(t=>c(t,{type:"cart:toggle",boolean:"cartOpen"}))),e.on("cart:toggle",s),e.on("cart:render",(({cart:t})=>{o&&(o.outerHTML=t.sections["cart-drawer"]),window.app.unmount(),window.app.mount()})),()=>{e.on(["cart:toggle","cart:render"],(()=>{}))(),t.removeEventListener("keyup",(t=>c(t,{type:"cart:toggle",boolean:"cartOpen"})))}})),cartItem:window.component((t=>{const{update:e}=n(t,null),{key:o}=t.dataset;[].concat(e).forEach((t=>{const{value:e}=t.dataset;t.addEventListener("click",(()=>function(t,e){return function(t,e){return window.app.emit("cart:updating"),fetch(`${window.Phill.routes.cartChange}.js`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,quantity:e,sections:"cart-drawer"})}).then((t=>t.json())).then((async t=>(window.app.emit(["cart:updated","cart:render"],{cart:t}),t)))}(t,e)}(o,e)))}))}))};window.app.add(r),window.app.mount()})();