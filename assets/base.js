(()=>{"use strict";function t(t=document.body,e="js-"){const n=[...t.querySelectorAll(e?`[class*="${e}"]`:"*")],o=e?"classList":"dataset";return n.reduce(((t,n)=>([].slice.call(e?n[o]:Object.entries(n[o])).forEach((o=>{let a;e&&o.slice(0,e.length)===e?a=o.slice(e.length,o.length):e||([a]=o),a&&(t[a]=t.hasOwnProperty(a)?t[a].constructor===Array?t[a].concat(n):[t[a],n]:n)})),t)),{})}const e={sectionRendering:window.component((()=>{document.addEventListener("shopify:section:load",(()=>{window.app.unmount(),window.app.mount()}))})),consoleLog:window.component((t=>{const{text:e}=t.dataset;console.log("console:log",e)})),accordion:window.component(((e,n)=>{const{group:o}=e.dataset,{inner:a,toggle:c}=t(e,null),r="open",d=()=>{e.style.setProperty("--innerHeight",`${a.scrollHeight}px`)};d(),window.addEventListener("resize",d,{passive:!0}),c.addEventListener("click",(()=>{n.emit("accordion:toggle",null,{open:!e.classList.contains(r),node:e,group:o})})),n.on("accordion:toggle",((t,n={})=>{o===n.group&&e.classList[n.open&&n.node===e?"add":"remove"](r)}))})),header:window.component(((e,n)=>{const{cartCount:o,cartToggle:a}=t(e,null),c=t=>{t?.token&&(o.textContent=t.item_count)};n.on("cart:updated",(({cart:t})=>c(t))),a.addEventListener("click",(t=>{t.preventDefault(),n.emit("cart:toggle",(({cartOpen:t})=>({cartOpen:!t??!0})))})),c(n.getState()?.cart)})),cartDrawer:window.component(((e,n)=>{const o=e.parentNode,{toggle:a,clear:c,focusEl:r}=t(e,null),d=({cartOpen:t})=>{e.classList[t?"add":"remove"]("open"),t?(console.log("focus:node",e),e.tabIndex="",(r||e).focus()):e.tabIndex="-1"};return a.forEach((t=>{t.addEventListener("click",(()=>n.emit("cart:toggle",(({cartOpen:t})=>({cartOpen:!t??!0})))))})),d(n.getState()),c&&c.addEventListener("click",(()=>(window.app.emit("cart:updating"),fetch(`${window.Phill.routes.cartClear}.js`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({sections:"cart-drawer"})}).then((t=>t.json())).then((t=>(window.app.emit(["cart:updated","cart:render"],{cart:t}),t)))))),n.on("cart:toggle",d),n.on("cart:render",(({cart:t})=>{o&&(o.outerHTML=t.sections["cart-drawer"]),window.app.unmount(),window.app.mount()})),()=>n.on(["cart:toggle","cart:render"],(()=>{}))()})),cartItem:window.component((e=>{const{update:n}=t(e,null),{key:o}=e.dataset;[].concat(n).forEach((t=>{const{value:e}=t.dataset;t.addEventListener("click",(()=>function(t,e){return function(t,e){return window.app.emit("cart:updating"),fetch(`${window.Phill.routes.cartChange}.js`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,quantity:e,sections:"cart-drawer"})}).then((t=>t.json())).then((async t=>(window.app.emit(["cart:updated","cart:render"],{cart:t}),t)))}(t,e)}(o,e)))}))}))};window.app.add(e),window?.app?.getState()?.cart&&window.app.mount()})();